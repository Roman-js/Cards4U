(this.webpackJsonpcards=this.webpackJsonpcards||[]).push([[0],{10:function(e,t,n){e.exports={forLinks:"Common_forLinks__1l5g1",forInput:"Common_forInput__3E9bg",forButton:"Common_forButton__3VnRI"}},33:function(e,t,n){e.exports={wrapperOfHeader:"Header_wrapperOfHeader__3r8LB"}},35:function(e,t,n){e.exports=n(64)},40:function(e,t,n){},41:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),l=n.n(o),c=(n(40),n(41),n(15)),i=n(1),u=n(3),s=function(e){return a.a.createElement("div",null,a.a.createElement("h2",null,e.title))},d=n(10),m=n.n(d),E=function(e){return a.a.createElement("input",{className:m.a.forInput,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value,onChange:e.onChange,placeholder:e.placeholder,type:e.type})},f=function(e){return a.a.createElement("button",{className:m.a.forButton,type:e.typeOfButton,onClick:e.actionOfButton,disabled:e.disabled},e.nameOfButton)},p=function(e){return a.a.createElement(c.b,{className:m.a.forLinks,to:e.way},e.wordOfLink)},O=n(8),g=n.n(O),b=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],l=n[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),d=i[0],m=i[1],O=function(){e.toCleanErrorField()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"Set New Password"}),e.error?a.a.createElement("div",null,e.error):null,e.loading?a.a.createElement("div",null,"Loading..."):null,a.a.createElement("div",null,a.a.createElement(E,{placeholder:"new pass",type:"password",value:o,onBlur:O,onFocus:O,onChange:function(e){l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(E,{placeholder:"repeat pass",type:"password",value:d,onBlur:O,onFocus:O,onChange:function(e){m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",disabled:e.disabled,actionOfButton:function(){e.setValueOfSetNewPassForm(o,d),l(""),m("")},nameOfButton:"Set new password"})),a.a.createElement("div",null,a.a.createElement(p,{way:"/sign-in",wordOfLink:"Sign In"})))},h=n(4),v=n(32),w=n.n(v).a.create({baseURL:"https://neko-cafe-back.herokuapp.com/"}),S=function(e,t,n){return w.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},A=function(e,t,n){return w.post("auth/forgot",{email:e,html1:t,html2:n}).then((function(e){return console.log(e)}))},R=function(e,t){return w.post("auth/register",{email:e,password:t}).then((function(e){return e}))},y=function(e){return w.post("auth/me",{authToken:e}).then((function(e){return e})).catch((function(e){return e}))},T=function(e,t){return w.post("auth/set-new-password",{resetPasswordToken:e,password:t}).then((function(e){return e}))},k=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.setNewPass})),n=Object(i.f)().token;return a.a.createElement(b,{setValueOfSetNewPassForm:function(t,r){t===r&&t.length>7?(e({type:"SET-LOADING-VALUE",loading:!0,disabled:!0}),T(n,t).then((function(t){e({type:"SET-NEW-TOKEN",token:n}),e({type:"SET-LOADING-VALUE",loading:!1,disabled:!1})})).catch((function(t){console.log(t.response),e({type:"SHOW-ERROR",error:t.response.data.error}),e({type:"SET-LOADING-VALUE",loading:!1,disabled:!1})}))):e({type:"SHOW-ERROR",error:"Incorrect Password! Password should have min 8 values and each one fields should be same!"})},error:t.error,loading:t.loading,disabled:t.disabled,toCleanErrorField:function(){e({type:"TO-CLEAN-ERROR-FIELD",error:null})}})},I="auth/register/WAITING-FOR-RESPONSE",j="auth/register/SET-ERROR-REGISTER-PAGE",N=function(e){var t=localStorage.getItem("auth-token");Object(r.useEffect)((function(){y(t)}),[]);var n=Object(r.useState)(""),o=Object(u.a)(n,2),l=o[0],c=o[1],i=Object(r.useState)(""),d=Object(u.a)(i,2),m=d[0],O=d[1],b=Object(r.useState)(!1),h=Object(u.a)(b,2),v=h[0],w=h[1],S=function(){return e.toCleanErrorField()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"sign-in"}),e.loading?a.a.createElement("div",null,"loading..."):null,e.error?a.a.createElement("div",null,e.error):null,a.a.createElement("div",null,a.a.createElement(E,{type:"text",placeholder:"email",value:l,onFocus:S,onBlur:S,onChange:function(e){return c(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(E,{type:"password",placeholder:"password",value:m,onFocus:S,onBlur:S,onChange:function(e){return O(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(p,{way:"/forgot",wordOfLink:"Forgot password?"})),a.a.createElement("div",null,a.a.createElement(E,{type:"checkbox",checked:v,onChange:function(e){return w(!v)}}),"Remember Me"),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){return e.setSignInFormValues(l,m,v)},disabled:e.disabled,nameOfButton:"Sign In"})),a.a.createElement("div",null,a.a.createElement(p,{way:"/register",wordOfLink:"Registration"})))},L=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.signIn}));return t.redirect?a.a.createElement(i.a,{to:"/profile"}):a.a.createElement(N,{setSignInFormValues:function(t,n,r){e({type:"SET-LOADING-DATA",loading:!0,disabled:!0}),S(t,n,r).then((function(t){console.log(t),e({type:"SET-LOADING-DATA",loading:!1,disabled:!1}),e({type:"SET-SIGN-IN-FORM-VALUES",email:t.email,password:n,rememberMe:t.rememberMe,token:t.token,redirect:!0}),localStorage.setItem("auth-token",t.token);var r=localStorage.getItem("auth-token");e({type:"IS-TOKEN-HAS",authToken:r})})).catch((function(t){console.log(t.response);var n=t.response.data.error;e({type:"SET-LOADING-DATA",loading:!1,disabled:!1,redirect:!1}),e({type:"SET-ERROR-SIGN-IN-PAGE",error:n})}))},loading:t.loading,disabled:t.disabled,error:t.error,toCleanErrorField:function(){e({type:"SET-ERROR-SIGN-IN-PAGE",error:null})}})},G=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],l=n[1],c=function(){return e.toCleanError()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"forgot"}),e.loading?a.a.createElement("div",null,"Loading..."):null,e.error?a.a.createElement("div",null,e.error):null,a.a.createElement("div",null,a.a.createElement(E,{placeholder:"email address",type:"text",value:o,onBlur:c,onFocus:c,onChange:function(e){l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){e.setForgotPassword(o),l("")},nameOfButton:"Send email",disabled:e.disabled})),a.a.createElement("div",null,a.a.createElement(p,{way:"/sign-in",wordOfLink:"Sign In"})))},F=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.forgot}));return t.emailApproved?a.a.createElement(i.a,{to:"/set-new-pass/:token"}):a.a.createElement(G,{setForgotPassword:function(t){return e({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!0,disabled:!0}),A(t,"<a href=http://localhost:3000/template-typescript#/set-new-pass/",">reset-password-link</a>").then((function(t){console.log(t),e({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!1,disabled:!1,emailApproved:!0})})).catch((function(t){console.log(t.response.data.error);var n=t.response.data.error;e({type:"SET-VALUE-ERROR-FORGOT-PAGE",error:n}),e({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!1,disabled:!1})})),e({type:"RESTORE-FORGOT-PASSWORD",email:t})},toCleanError:function(){e({type:"SET-VALUE-ERROR-FORGOT-PAGE",error:null})},loading:t.loading,disabled:t.disabled,error:t.error})},B=function(e){var t=e.setRegisterFormValues,n=e.loading,o=e.error,l=e.CancelErrorPosition,c=Object(r.useState)(""),i=Object(u.a)(c,2),d=i[0],m=i[1],O=Object(r.useState)(""),b=Object(u.a)(O,2),h=b[0],v=b[1],w=Object(r.useState)(""),S=Object(u.a)(w,2),A=S[0],R=S[1],y=function(){return l()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"Register"}),n&&a.a.createElement("div",null,"wait"),o&&a.a.createElement("label",null,o),a.a.createElement("div",null,a.a.createElement(E,{placeholder:"email",type:"email",onBlur:y,onFocus:y,onChange:function(e){return m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(E,{placeholder:"password",type:"password",onBlur:y,onFocus:y,onChange:function(e){return v(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(E,{placeholder:"repeat password",type:"password",onBlur:y,onFocus:y,onChange:function(e){return R(e.currentTarget.value)}})),a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){return t(d,h,A)},nameOfButton:"Register"}),a.a.createElement(p,{way:"/sign-in",wordOfLink:"Sign In"}))},C=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.register}));return a.a.createElement(a.a.Fragment,null,t.redirect&&a.a.createElement(i.a,{to:"/profile"}),a.a.createElement(B,{setRegisterFormValues:function(t,n,r){if(n!==r){e({type:j,error:"fields password and repeat password should be the same"})}else{if(!(n.length<=7&&t!==/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/))return e({type:I,loading:!0}),R(t,n).then((function(r){e({type:I,loading:!1}),e({type:"auth/register/REGISTER-SUCCESS",email:t,password:n,redirect:!0})})).catch((function(t){e({type:I,loading:!1}),e({type:j,error:"your email is invalid or is already registered"})}));e({type:j,error:"your email of password is not valid"})}},loading:t.loading,error:t.error,CancelErrorPosition:function(){return e({type:j,error:null})}}))},P=n(33),D=n.n(P),_=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=(t[0],t[1]);return a.a.createElement("div",{className:D.a.wrapperOfHeader},a.a.createElement(p,{way:"/sign-in",wordOfLink:"sign-in"}),a.a.createElement(p,{way:"/register",wordOfLink:"register"}),a.a.createElement(p,{way:"/forgot",wordOfLink:"forgot"}),a.a.createElement(p,{way:"/set-new-pass/:token",wordOfLink:"set-new-pass"}),a.a.createElement(p,{way:"/profile",wordOfLink:"profile"}),a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){localStorage.removeItem("auth-token"),n(!1)},nameOfButton:"logout"}))},V=function(){var e=localStorage.getItem("auth-token");return Object(r.useEffect)((function(){y(e)}),[]),a.a.createElement(_,null)},U=function(){var e=localStorage.getItem("auth-token");return console.log(e),Object(r.useEffect)((function(){y(e)}),[]),a.a.createElement("div",null,e?a.a.createElement("div",null):a.a.createElement(i.a,{to:"/sign-in"}))},M=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null),a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(i.b,{path:"/sign-in",render:function(){return a.a.createElement(L,null)}}),a.a.createElement(i.b,{path:"/register",render:function(){return a.a.createElement(C,null)}}),a.a.createElement(i.b,{path:"/forgot",render:function(){return a.a.createElement(F,null)}}),a.a.createElement(i.b,{path:"/set-new-pass/:token",render:function(){return a.a.createElement(k,null)}}),a.a.createElement(i.b,{path:"/profile",render:function(){return a.a.createElement(U,null)}})))},W=n(11),H=n(34),x=n(2),K={email:"",loading:!1,disabled:!1,error:null,emailApproved:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTORE-FORGOT-PASSWORD":return Object(x.a)({},e,{email:t.email});case"SET-LOADING-DATA-FORGOT-PAGE":return Object(x.a)({},e,{loading:t.loading,disabled:t.disabled,emailApproved:t.emailApproved});case"SET-VALUE-ERROR-FORGOT-PAGE":return Object(x.a)({},e,{error:t.error});default:return e}},Z={},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return e},$={email:"",password:"",loading:!1,error:!1,redirect:!1},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/register/REGISTER-SUCCESS":return Object(x.a)({},e,{email:t.email,password:t.password,redirect:!0});case I:return Object(x.a)({},e,{loading:t.loading});case j:return Object(x.a)({},e,{error:t.error})}return e},q={error:"",token:"",loading:null,disabled:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW-ERROR":return Object(x.a)({},e,{error:t.error});case"SET-NEW-TOKEN":return Object(x.a)({},e,{token:t.token});case"SET-LOADING-VALUE":return Object(x.a)({},e,{loading:t.loading});case"TO-CLEAN-ERROR-FIELD":return Object(x.a)({},e,{error:t.error});default:return e}},Y={email:"",password:"",rememberMe:!1,loading:!1,disabled:!1,error:null,token:"",redirect:!1,authToken:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-SIGN-IN-FORM-VALUES":return Object(x.a)({},e,{email:t.email,password:t.password,rememberMe:t.rememberMe,token:t.token,redirect:t.redirect});case"SET-LOADING-DATA":return Object(x.a)({},e,{loading:t.loading,disabled:t.disabled,redirect:t.redirect});case"SET-ERROR-SIGN-IN-PAGE":return Object(x.a)({},e,{error:t.error});case"IS-TOKEN-HAS":return Object(x.a)({},e,{authToken:t.authToken});default:return e}},te=Object(W.c)({forgot:z,register:X,setNewPass:Q,signIn:ee,profile:J}),ne=Object(W.d)(te,Object(W.a)(H.a));var re=function(){return a.a.createElement(c.a,null,a.a.createElement(h.a,{store:ne},a.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports={wrapperOfAuth:"Auth_wrapperOfAuth__3XmyS"}}},[[35,1,2]]]);
//# sourceMappingURL=main.ab024574.chunk.js.map