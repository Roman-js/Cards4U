(this.webpackJsonpcards=this.webpackJsonpcards||[]).push([[0],{12:function(e,t,r){e.exports={forLinks:"Common_forLinks__1l5g1",forInput:"Common_forInput__3E9bg",forButton:"Common_forButton__3VnRI"}},35:function(e,t,r){e.exports={wrapperOfHeader:"Header_wrapperOfHeader__3r8LB"}},37:function(e,t,r){e.exports=r(67)},42:function(e,t,r){},43:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(15),l=r.n(o),c=(r(42),r(43),r(17)),u=r(1),i=r(4),s=function(e){return a.a.createElement("div",null,a.a.createElement("h2",null,e.title))},d=r(12),m=r.n(d),p=function(e){return a.a.createElement("input",{className:m.a.forInput,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value,onChange:e.onChange,placeholder:e.placeholder,type:e.type})},f=function(e){return a.a.createElement("button",{className:m.a.forButton,type:e.typeOfButton,onClick:e.actionOfButton,disabled:e.disabled},e.nameOfButton)},E=function(e){return a.a.createElement(c.b,{className:m.a.forLinks,to:e.way},e.wordOfLink)},O=r(9),g=r.n(O),b=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),o=r[0],l=r[1],c=Object(n.useState)(""),d=Object(i.a)(c,2),m=d[0],O=d[1],b=Object(u.f)().token,h=function(){e.toCleanErrorField()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"Set New Password"}),e.error?a.a.createElement("div",null,e.error):null,e.loading?a.a.createElement("div",null,"Loading..."):null,a.a.createElement("div",null,a.a.createElement(p,{placeholder:"new pass",type:"password",value:o,onBlur:h,onFocus:h,onChange:function(e){l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(p,{placeholder:"repeat pass",type:"password",value:m,onBlur:h,onFocus:h,onChange:function(e){O(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",disabled:e.disabled,actionOfButton:function(){e.setValueOfSetNewPassForm(o,m,b),l(""),O("")},nameOfButton:"Set new password"})),a.a.createElement("div",null,a.a.createElement(E,{way:"/sign-in",wordOfLink:"Sign In"})))},h=r(3),w="auth/register/WAITING-FOR-RESPONSE",v="auth/register/SET-ERROR-REGISTER-PAGE",S=r(8),y=r.n(S),A=r(10),R=r(2),T=r(34),k=r.n(T).a.create({baseURL:"https://neko-cafe-back.herokuapp.com/"}),j=function(e,t,r){return k.post("auth/login",{email:e,password:t,rememberMe:r}).then((function(e){return e.data}))},I=function(e,t,r){return k.post("auth/forgot",{email:e,html1:t,html2:r}).then((function(e){return console.log(e)}))},N=function(e,t){return k.post("auth/register",{email:e,password:t}).then((function(e){return e}))},F=function(e){return k.post("auth/me",{authToken:e}).then((function(e){return e})).catch((function(e){return e}))},L=function(e,t){return k.post("auth/set-new-password",{resetPasswordToken:e,password:t}).then((function(e){return e}))},G={error:"",token:"",loading:null,disabled:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW-ERROR":return Object(R.a)({},e,{error:t.error});case"SET-NEW-TOKEN":return Object(R.a)({},e,{token:t.token});case"SET-LOADING-VALUE":return Object(R.a)({},e,{loading:t.loading});case"TO-CLEAN-ERROR-FIELD":return Object(R.a)({},e,{error:t.error});default:return e}},C=Object(h.b)(null,{setValueOfSetNewPassForm:function(e,t,r){return function(){var n=Object(A.a)(y.a.mark((function n(a,o){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e===t&&e.length>7)){n.next=7;break}return a({type:"SET-LOADING-VALUE",loading:!0,disabled:!0}),n.next=4,L(r,e);case 4:try{a({type:"SET-NEW-TOKEN",token:r}),a({type:"SET-LOADING-VALUE",loading:!1,disabled:!1})}catch(o){console.log(o.response),a({type:"SHOW-ERROR",error:o.response.data.error}),a({type:"SET-LOADING-VALUE",loading:!1,disabled:!1})}n.next=8;break;case 7:a({type:"SHOW-ERROR",error:"Incorrect Password! Password should have min 8 values and each one fields should be same!"});case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})((function(e){var t=Object(h.c)(),r=Object(h.d)((function(e){return e.setNewPass}));return a.a.createElement(b,{setValueOfSetNewPassForm:e.setValueOfSetNewPassForm,error:r.error,loading:r.loading,disabled:r.disabled,toCleanErrorField:function(){t({type:"TO-CLEAN-ERROR-FIELD",error:null})}})})),P=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),o=r[0],l=r[1],c=Object(n.useState)(""),u=Object(i.a)(c,2),d=u[0],m=u[1],O=Object(n.useState)(!1),b=Object(i.a)(O,2),h=b[0],w=b[1],v=function(){e.toCleanErrorField()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"sign-in"}),e.loading?a.a.createElement("div",null,"loading..."):null,e.error?a.a.createElement("div",null,e.error):null,a.a.createElement("div",null,a.a.createElement(p,{type:"text",placeholder:"email",value:o,onFocus:v,onBlur:v,onChange:function(e){l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(p,{type:"password",placeholder:"password",value:d,onFocus:v,onBlur:v,onChange:function(e){m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(E,{way:"/forgot",wordOfLink:"Forgot password?"})),a.a.createElement("div",null,a.a.createElement(p,{type:"checkbox",checked:h,onChange:function(e){w(!h)}}),"Remember Me"),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){e.setSignInFormValues(o,d,h)},disabled:e.disabled,nameOfButton:"Sign In"})),a.a.createElement("div",null,a.a.createElement(E,{way:"/register",wordOfLink:"Registration"})))},D={email:"",password:"",rememberMe:!1,loading:!1,disabled:!1,error:null,token:"",redirect:!1,authToken:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-SIGN-IN-FORM-VALUES":return Object(R.a)({},e,{email:t.email,password:t.password,rememberMe:t.rememberMe,token:t.token,redirect:t.redirect});case"SET-LOADING-DATA":return Object(R.a)({},e,{loading:t.loading,disabled:t.disabled,redirect:t.redirect});case"SET-ERROR-SIGN-IN-PAGE":return Object(R.a)({},e,{error:t.error});case"IS-TOKEN-HAS":return Object(R.a)({},e,{authToken:t.authToken});default:return e}},x=Object(h.b)(null,{setSignInFormValues:function(e,t,r){return function(){var n=Object(A.a)(y.a.mark((function n(a,o){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"SET-LOADING-DATA",loading:!0,disabled:!0}),n.next=3,j(e,t,r).then((function(e){a({type:"SET-LOADING-DATA",loading:!1,disabled:!1}),a({type:"SET-SIGN-IN-FORM-VALUES",email:e.email,password:t,rememberMe:e.rememberMe,token:e.token,redirect:!0}),localStorage.setItem("auth-token",e.token);var r=localStorage.getItem("auth-token");a({type:"IS-TOKEN-HAS",authToken:r})})).catch((function(e){console.log(e.response);var t=e.response.data.error;a({type:"SET-LOADING-DATA",loading:!1,disabled:!1,redirect:!1}),a({type:"SET-ERROR-SIGN-IN-PAGE",error:t})}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})((function(e){var t=Object(h.c)(),r=Object(h.d)((function(e){return e.signIn}));return r.redirect?a.a.createElement(u.a,{to:"/profile"}):a.a.createElement(P,{setSignInFormValues:e.setSignInFormValues,loading:r.loading,disabled:r.disabled,error:r.error,toCleanErrorField:function(){t({type:"SET-ERROR-SIGN-IN-PAGE",error:null})}})})),_=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),o=r[0],l=r[1],c=function(){e.toCleanError()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"forgot"}),e.loading?a.a.createElement("div",null,"Loading..."):null,e.error?a.a.createElement("div",null,e.error):null,a.a.createElement("div",null,a.a.createElement(p,{placeholder:"email address",type:"text",value:o,onBlur:c,onFocus:c,onChange:function(e){l(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){e.setForgotPassword(o),l("")},nameOfButton:"Send email",disabled:e.disabled})),a.a.createElement("div",null,a.a.createElement(E,{way:"/sign-in",wordOfLink:"Sign In"})))},U={email:"",loading:!1,disabled:!1,error:null,emailApproved:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESTORE-FORGOT-PASSWORD":return Object(R.a)({},e,{email:t.email});case"SET-LOADING-DATA-FORGOT-PAGE":return Object(R.a)({},e,{loading:t.loading,disabled:t.disabled,emailApproved:t.emailApproved});case"SET-VALUE-ERROR-FORGOT-PAGE":return Object(R.a)({},e,{error:t.error});default:return e}},W=Object(h.b)(null,{setForgotPassword:function(e){return function(){var t=Object(A.a)(y.a.mark((function t(r,n){var a,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!0,disabled:!0}),t.prev=1,t.next=4,I(e,"<a href=http://localhost:3000/template-typescript#/set-new-pass/",">reset-password-link</a>");case 4:a=t.sent,console.log(a),r({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!1,disabled:!1,emailApproved:!0}),r({type:"RESTORE-FORGOT-PASSWORD",email:e}),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.response.data.error),o=t.t0.response.data.error,r({type:"SET-VALUE-ERROR-FORGOT-PAGE",error:o}),r({type:"SET-LOADING-DATA-FORGOT-PAGE",loading:!1,disabled:!1});case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}()},toCleanError:function(){return function(){var e=Object(A.a)(y.a.mark((function e(t,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"SET-VALUE-ERROR-FORGOT-PAGE",error:null})}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}})((function(e){var t=Object(h.d)((function(e){return e.forgot}));return t.emailApproved?a.a.createElement(u.a,{to:"/set-new-pass/:token"}):a.a.createElement(_,{setForgotPassword:e.setForgotPassword,toCleanError:e.toCleanError,loading:t.loading,disabled:t.disabled,error:t.error})})),H=function(e){var t=e.setRegisterFormValues,r=e.loading,o=e.error,l=e.CancelErrorPosition,c=Object(n.useState)(""),u=Object(i.a)(c,2),d=u[0],m=u[1],O=Object(n.useState)(""),b=Object(i.a)(O,2),h=b[0],w=b[1],v=Object(n.useState)(""),S=Object(i.a)(v,2),y=S[0],A=S[1],R=function(){return l()};return a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(s,{title:"Register"}),r&&a.a.createElement("div",null,"wait"),o&&a.a.createElement("label",null,o),a.a.createElement("div",null,a.a.createElement(p,{placeholder:"email",type:"email",onBlur:R,onFocus:R,onChange:function(e){return m(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(p,{placeholder:"password",type:"password",onBlur:R,onFocus:R,onChange:function(e){return w(e.currentTarget.value)}})),a.a.createElement("div",null,a.a.createElement(p,{placeholder:"repeat password",type:"password",onBlur:R,onFocus:R,onChange:function(e){return A(e.currentTarget.value)}})),a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){return t(d,h,y)},nameOfButton:"Register"}),a.a.createElement(E,{way:"/sign-in",wordOfLink:"Sign In"}))},K=function(){var e=Object(h.c)(),t=Object(h.d)((function(e){return e.register}));return a.a.createElement(a.a.Fragment,null,t.redirect&&a.a.createElement(u.a,{to:"/profile"}),a.a.createElement(H,{setRegisterFormValues:function(t,r,n){if(r!==n){e({type:v,error:"fields password and repeat password should be the same"})}else{if(!(r.length<=7&&t!==/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/))return e({type:w,loading:!0}),N(t,r).then((function(n){e({type:w,loading:!1}),e({type:"auth/register/REGISTER-SUCCESS",email:t,password:r,redirect:!0})})).catch((function(t){e({type:w,loading:!1}),e({type:v,error:"your email is invalid or is already registered"})}));e({type:v,error:"your email of password is not valid"})}},loading:t.loading,error:t.error,CancelErrorPosition:function(){return e({type:v,error:null})}}))},z=r(35),Z=r.n(z),J=function(e){return a.a.createElement("div",{className:Z.a.wrapperOfHeader},a.a.createElement(E,{way:"/sign-in",wordOfLink:"sign-in"}),a.a.createElement(E,{way:"/register",wordOfLink:"register"}),a.a.createElement(E,{way:"/forgot",wordOfLink:"forgot"}),a.a.createElement(E,{way:"/set-new-pass/:token",wordOfLink:"set-new-pass"}),a.a.createElement(E,{way:"/profile",wordOfLink:"profile"}),e.login?a.a.createElement(f,{typeOfButton:"button",actionOfButton:function(){e.tokenIsClear()},nameOfButton:"logout"}):null)},$=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),r=t[0],o=t[1],l=localStorage.getItem("auth-token");Object(n.useEffect)((function(){o(!!l)}),[]);return a.a.createElement(J,{login:r,tokenIsClear:function(){var e=localStorage.removeItem("auth-token");o(!1),console.log(e)}})},X=function(){var e=localStorage.getItem("auth-token");return console.log(e),Object(n.useEffect)((function(){F(e)}),[]),a.a.createElement("div",null,a.a.createElement("h1",null,"Profile page"))},q=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement($,null),a.a.createElement("div",{className:g.a.wrapperOfAuth},a.a.createElement(u.b,{path:"/sign-in",render:function(){return a.a.createElement(x,null)}}),a.a.createElement(u.b,{path:"/register",render:function(){return a.a.createElement(K,null)}}),a.a.createElement(u.b,{path:"/forgot",render:function(){return a.a.createElement(W,null)}}),a.a.createElement(u.b,{path:"/set-new-pass/:token",render:function(){return a.a.createElement(C,null)}}),a.a.createElement(u.b,{path:"/profile",render:function(){return a.a.createElement(X,null)}})))},Q=r(13),Y=r(36),ee={},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;return e},re={email:"",password:"",loading:!1,error:!1,redirect:!1},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/register/REGISTER-SUCCESS":return Object(R.a)({},e,{email:t.email,password:t.password,redirect:!0});case w:return Object(R.a)({},e,{loading:t.loading});case v:return Object(R.a)({},e,{error:t.error})}return e},ae=Object(Q.c)({forgot:M,register:ne,setNewPass:B,signIn:V,profile:te}),oe=Object(Q.d)(ae,Object(Q.a)(Y.a));var le=function(){return a.a.createElement(c.a,null,a.a.createElement(h.a,{store:oe},a.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,r){e.exports={wrapperOfAuth:"Auth_wrapperOfAuth__3XmyS"}}},[[37,1,2]]]);
//# sourceMappingURL=main.258dd880.chunk.js.map